---
layout: default
id: home
title: bootstrap-vz by andsens
heading: bootstrap-vz
---
<p>
	bootstrap-vz is a bootstrapping framework for Debian.
	It is is specifically intended to bootstrap systems for virtualized environments.
	It runs without any user intervention and generates ready-to-boot images for
	<a href="providers.html">a number of virtualization platforms</a>.
	Its aim is to provide a reproducable bootstrapping process using <a href="manifest.html">manifests</a>
	as well as supporting a high degree of customizability through plugins.<br/>
	bootstrap-vz was coded from scratch in python once the bash scripts that were used in the
	<a href="https://github.com/andsens/build-debian-cloud">build-debian-cloud</a> bootstrapper reached their
	limits.
</p>

<p>
	<h2 id="quickstart">Quick start</h2>
	Here are a few quickstart tutorials for the most common images.<br/>
	If you plan on partitioning your volume, you will need the <tt>parted</tt> package and <tt>kpartx</tt>:
<pre>
root@host:~$ apt-get install parted kpartx
</pre>
</p>
<p>
	<h3>VirtualBox Vagrant</h3>
<pre>
user@host:~$ sudo -i # become root
root@host:~$ git clone https://github.com/andsens/bootstrap-vz.git # Clone the repo
root@host:~$ apt-get install qemu-utils debootstrap python-pip # Install dependencies from aptitude
root@host:~$ pip install termcolor jsonschema fysom # Install python dependencies
root@host:~$ cd bootstrap-vz
root@host:~/bootstrap-vz$ ./bootstrap-vz manifests/virtualbox-vagrant.manifest.json
</pre>
	If you want to use <a href="plugins.html#minimize_size">minimize_size</a>
	plugin, you will have to install the <tt>zerofree</tt> package and <a href="https://my.vmware.com/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation/10_0">VMWare Workstation</a> as well.
</p>
<p>
	<h3>Amazon EC2 EBS backed AMI</h3>
<pre>
user@host:~$ sudo -i # become root
root@host:~$ git clone https://github.com/andsens/bootstrap-vz.git # Clone the repo
root@host:~$ apt-get install debootstrap python-pip # Install dependencies from aptitude
root@host:~$ pip install termcolor jsonschema fysom boto # Install python dependencies
root@host:~$ cd bootstrap-vz
root@host:~/bootstrap-vz$ ./bootstrap-vz manifests/ec2-ebs-debian-official-amd64-pvm.manifest.json
</pre>
	To bootstrap S3 backed AMIs, the <tt>euca2ools</tt> package is the only additional package required.
</p>

<p>
	<h2 id="cleanup">Cleanup</h2>
	bootstrap-vz tries very hard to clean up after itself both if a run was successful but also if it failed.
	This ensures that you are not left with volumes still attached to the host which are useless.
	If an error occurred you can simply correct the problem that caused it and rerun everything,
	there will be no leftovers from the previous run
	(as always there are of course rare/unlikely exceptions to that rule).
	The error messages should always give you a strong hint at what is wrong, if that is not the case
	please consider <a href="https://github.com/andsens/bootstrap-vz/issues">opening an issue</a>
	and attach both the error message and your manifest (preferably as a gist or similar).
</p>

<p>
	<h2 id="dependencies">Dependencies</h2>
	bootstrap-vz has a number of dependencies depending on the target platform and
	<a href="plugins.html">the selected plugins</a>.
	At a bare minimum the following python libraries are needed:
	<ul>
		<li><a href="https://pypi.python.org/pypi/termcolor">termcolor</a></li>
		<li><a href="https://pypi.python.org/pypi/fysom">fysom</a></li>
		<li><a href="https://pypi.python.org/pypi/jsonschema">jsonschema</a></li>
	</ul>
	To bootstrap Debian itself <a href="https://packages.debian.org/wheezy/debootstrap">debootstrap</a>
	is needed as well.<br/>
	Any other requirements are dependent upon the manifest configuration and are detailed in the corresponding
	sections of the documentation.
	bootstrap-vz will however warn you if a requirement has not been met, before the bootstrapping process begins.
</p>
